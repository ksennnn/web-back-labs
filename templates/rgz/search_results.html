{% extends "rgz/base.html" %}

{% block content %}
<h2>Результаты поиска</h2>

{% if search_query %}
<p>Поиск по запросу: "<strong>{{ search_query }}</strong>"</p>
{% elif ingredients %}
<p>Поиск по ингредиентам: "<strong>{{ ingredients }}</strong>" (режим: {{ "все ингредиенты" if search_mode == "all" else "хотя бы один" }})</p>
{% endif %}

<div class="back-link">
    <a href="{{ url_for('rgz.search') }}">← Новый поиск</a>
</div>

{% if recipes %}
<div class="recipes-list">
    {% for recipe in recipes %}
    <div class="recipe-item">
        <div class="recipe-header">
            <h3><a href="{{ url_for('rgz.view_recipe', recipe_id=recipe.id) }}">{{ recipe.title }}</a></h3>
        </div>
        
        <div class="recipe-content">
            {% if recipe.photo_url %}
            <div class="recipe-image">
                <img src="{{ recipe.photo_url }}" alt="{{ recipe.title }}">
            </div>
            {% endif %}
            
            <div class="recipe-details">
                <h4>Ингредиенты:</h4>
                <p>{{ recipe.ingredients[:200] }}{% if recipe.ingredients|length > 200 %}...{% endif %}</p>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="no-results">
    <p>По вашему запросу ничего не найдено.</p>
</div>
{% endif %}
{% endblock %}
{% extends "rgz/base.html" %}

{% block content %}
<h2>Добро пожаловать на сайт кулинарных рецептов!</h2>

<div class="welcome">
    <p>Здесь вы найдете более 100 рецептов различных блюд. Вы можете:</p>
    <ul>
        <li>Просматривать все рецепты</li>
        <li>Искать рецепты по названию или ингредиентам</li>
        <li>Зарегистрироваться для получения дополнительных возможностей</li>
        {% if session.get('is_admin') %}
            <li>Добавлять, редактировать и удалять рецепты (администратор)</li>
        {% endif %}
    </ul>
</div>

<h3>Последние рецепты:</h3>
<div class="recipes-grid">
    {% for recipe in recipes %}
    <div class="recipe-card">
        {% if recipe.photo_url %}
        <img src="{{ recipe.photo_url }}" alt="{{ recipe.title }}">
        {% else %}
        <div class="no-photo">Нет фото</div>
        {% endif %}
        <h4><a href="{{ url_for('rgz.view_recipe', recipe_id=recipe.id) }}">{{ recipe.title }}</a></h4>
        <p class="ingredients-preview">{{ recipe.ingredients[:100] }}...</p>
        {% if session.get('is_admin') %}
        <div class="admin-actions">
            <a href="{{ url_for('rgz.edit_recipe', recipe_id=recipe.id) }}" class="btn-edit">Редактировать</a>
            <form action="{{ url_for('rgz.delete_recipe', recipe_id=recipe.id) }}" method="post" style="display:inline;">
                <button type="submit" class="btn-delete" onclick="return confirm('Удалить рецепт?')">Удалить</button>
            </form>
        </div>
        {% endif %}
    </div>
    {% endfor %}
</div>
{% endblock %}